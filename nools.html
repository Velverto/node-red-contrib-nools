<script type="text/javascript">
  RED.nodes.registerType("nools-flow", {
    category: "rules",
    color: "#83B3B3",
    defaults: {
      name: {value:"", required: true},
      topic: {value:"", required: false},
      flow: {value:"", required: true},
    },
    inputs:1,
    outputs:1,
    label: function() {
      return this.name;
    },
    oneditprepare: function() {
      var that = this;
      this.editor = RED.editor.createEditor({
        id: "node-input-flow-editor",
        mode: "ace/mode/html",
        value: $("#node-input-flow").val()
      });
      this.editor.on("change", function() {
        //Update the hidden item when editor content changed
        $("#node-input-flow").val(that.editor.getValue());
      });
      this.editor.focus();
    }
  });
</script>

<script type="text/x-red" data-template-name="nools-flow">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-bookmark"></i>Name</label>
        <input type="text" id="node-input-name" />
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="icon-bookmark"></i>Topic</label>
        <input type="text" id="node-input-topic" />
    </div>
    <div class="form-row node-text-editor-row">
      <input type="hidden" id="node-input-flow" autofocus="autofocus">
      <div style="height: 250px;" class="node-text-editor" id="node-input-flow-editor" ></div>
    </div>
</script>
